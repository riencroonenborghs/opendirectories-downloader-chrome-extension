<md-list-item ng-repeat="download in downloads[status]" class="md-3-line">
  <div class="md-avatar" layout="column">
    <md-button class="md-icon-button md-primary md-warn" aria-label="Cancel download" title="Cancel download" ng-if="download.canCancel" ng-click="cancelDownload(download)">
      <ng-md-icon icon="cancel">
    </md-button>
    <md-button class="md-icon-button md-primary" aria-label="Queue download" title="Queue download" ng-if="download.canQueue" ng-click="queueDownload(download)">
      <ng-md-icon icon="queue">
    </md-button>
    <md-button class="md-icon-button md-primary md-warn" aria-label="Delete download" title="Delete download" ng-if="download.canDelete" ng-click="deleteDownload(download)">
      <ng-md-icon icon="delete">
    </md-button>
  </div>

  <div class="md-list-item-text">
    <h3 ng-class="{pointer: selectedIndex != 0}" ng-click="download.visible = !download.visible">{{download.url}}</h3>
    <h4>Added by {{download.user.email}} on {{download.created_at | date: "EEEE, dd MMMM, hh:mm a"}}</h4>
    <p>
      <div ng-if="download.visible && (download.started_at || download.finished_at)">
        <span ng-if="download.started_at">Started: {{ download.started_at | date : "EEEE, dd MMMM, hh:mm a"}}</span>
        <span ng-if="download.finished_at">Finished: {{ download.finished_at | date : "EEEE, dd MMMM, hh:mm a"}}</span>
      </div>
      <div id="download-info" ng-if="downloadInfo.id == download.id" layout="row" layout-align="start center">
        <span id="percentage">{{downloadInfo.percentage}}%</span>
        <md-progress-linear md-mode="determinate" value="{{downloadInfo.percentage}}"></md-progress-linear>
        <span id="eta">{{downloadInfo.eta}}</span>
      </div>
      <div ng-if="download.visible && download.error" class="error">
        <h2>Error</h2>
        <p>{{download.error}}</p>
      </div>              
    </p>
  </div>
</md-list-item>